Вводные
-------

Проект сделан в качестве тестового задания.


Текст задания:
Нужно разработать веб-приложение для розыгрыша призов. После аутентификации
пользователь может нажать на кнопку и получить случайный приз. Призы бывают 3х
типов: денежный (случайная сумма в интервале), бонусные баллы (случайная сумма в
интервале), физический предмет (случайный предмет из списка). Денежный приз может
быть перечислен на счет пользователя в банке (HTTP запрос к API банка), баллы
зачислены на счет лояльности в приложении, предмет отправлен по почте (вручную
работником). Денежный приз может конвертироваться в баллы лояльности с учетом
коэфициэнта. От приза можно отказаться. Деньги и предметы ограничены, баллы
лояльности нет.

Некоторые вещи в задании были не очевидны, я сделал такие моменты по своему усмотрению, чтобы не тратить время на вопросы, руководствуясь принципом, что тут важен только вид кода, а не сама реализация :)


Требования
------------

Минимальная версия PHP для запуска проекта: 7.1


Установка
------------

Клонировать репозиторий

~~~
git clone https://github.com/steelice/prizes2all.git
cd prizes2all
~~~

После клонирования репозитория, просто запустить в папке с проектом установку всех необходимых модулей с помощью composer:

~~~
composer install
~~~

Затем скопировать файл `config/db.php.dist` в `config/db.php` и поменять в нём настройки БД.

После настройки базы, необходимо установить все таблицы с помощью миграций

~~~
php yii migrate
~~~


Также настроить доступ в своём любимом веб-сервере.
Apache будет поддерживаться из коробки, в случае nginx необходимо провести настройку, ключевые моменты:

~~~
    server_name mysite.test;
    root        /path/to/basic/web;
    index       index.php;

    location / {
        # Redirect everything that isn't a real file to index.php
        try_files $uri $uri/ /index.php$is_args$args;
    }

    # deny accessing php files for the /assets directory
    location ~ ^/assets/.*\.php$ {
        deny all;
    }

    location ~* /\. {
        deny all;
    }
 ~~~

После этого можно заходить на сайт из браузера.
При первом посещении сайта необходимо зарегистрировать пользователя с любой почтой и именем пользователя `admin` - такой пользователь автоматически станет администратором.

Тесты
-------

Тесты запускаются простой командой в папке проекта:

```
vendor/bin/codecept run
```

Тесты в данный момент проводятся в основной таблице. Фикстуры не используются.
